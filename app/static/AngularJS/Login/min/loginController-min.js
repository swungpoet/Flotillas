registrationModule.controller("loginController",function(o,e,r,n,i,t){o.isLoading=!1,o.idProceso=1,o.perfil=1;var s=function(o,e,r,i){$("#btnEnviar").button("reset"),n.error("Ocurrio un problema")};o.init=function(){t.getAll().success(l).error(s),o.empleado=r.get("employeeLogged"),null!=o.empleado&&(location.href="/busqueda")};var l=function(e,r,n,i){o.listaRoles=e};o.IniciarSesion=function(){$("#btnIngresar").button("loading"),i.login(o.usuario,o.password).success(a).error(s)};var a=function(e,i,t,s){null!=e?(o.empleado=e,r.set("employeeLogged",o.empleado),n.success("Bienvenido "+o.empleado.nombreCompleto),setTimeout(function(){location.href="/busqueda"},3e3)):n.warning("Usuario y/o password incorrecto."),$("#btnIngresar").button("reset")};o.Registro=function(){i.add(o.currentRol.idRol,o.nombre,o.correo,o.contrasena1).success(c).error(s)};var c=function(o,e,r,i){n.info("Hemos registrado su información con éxito."),n.info("Para completar el registro verifique el correo electrónico que le hemos enviado.")};o.SetCurrentRol=function(e){o.currentRol=e}});